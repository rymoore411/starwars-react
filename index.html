<html>
  <head>
    <style>
    table, th, td {
        border: 0.5px solid black;
    }
    p, #list{
      color: blue;
      font-family: Arial, Helvetica, sans-serif;
    }
    </style>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  </head>
<body>
  <header>
    <h1>Star Wars React Style!</h1>
  </header>
  <div id='root'></div>
<script type='text/babel'>

  const List = ({ people, select}) => {
    return(
      <ul>
          {
            people.map(person => {
              return (
                <div id="list" key = {person.name} onClick={()=> select(person.name)}>
                {person.name}
                </div>
              )
            })
          }
        </ul>
    )
  }

  const Detail = ({people, name, select})=> {
      return(
      <div>
      <p onClick={ ()=> select(null)}>Hide Details</p>
      <h2>Details for {name}</h2>
      {people.map(person => {

      if(person.name === name)
      {
      return(
        <table>
          <tbody>
            <tr>
              <td key = {name}><b>Name:</b> {name}</td>
            </tr>
            <tr>
              <td key = {person.name}><b>Hair Color:</b> {person.hair_color}</td>
            </tr>
            <tr>
              <td key = {person.name}><b>Height:</b> {person.height}</td>
            </tr>
            <tr>
              <td key = {person.name}><b>Eye Color:</b> {person.eye_color}</td>
            </tr>
            <tr>
              <td key = {person.name}><b>Birth Year:</b> {person.birth_year}</td>
            </tr>
            <tr>
              <td key = {person.name}><b>Homeworld:</b> {person.homeworld}</td>
            </tr>
          </tbody>
        </table>
    )
    }
})}
</div>)
}

  class App extends React.Component{
    constructor(){
      super();
      this.state = {
        people: [],
        name: null
      };
      this.select = this.select.bind(this);
    }

    select(name){
      this.setState({ name });
    }

    async componentDidMount(){
      try{
      const response = await fetch('https://swapi.co/api/people/');
      const data = await response.json();
      const people = data.results;
      this.setState({people});
      }
      catch (err){
      console.log("There was a problem getting star wars people", err)
      }
    }

    render(){
      const { people, name } = this.state;
      const { select } = this;
      return (
        <div>
        {
          <List people={ people } select={ select }/>
        }
        {
          name ? <Detail people={ people } name={ name } select={select}/> : null
        }
        </div>
      )
    }
  }

  const root = document.querySelector('#root')

  ReactDOM.render(<App />, root)

</script>
</body>
</html>
